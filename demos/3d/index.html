<!doctype html>
<html>
  <head>
    <title>3D language demo</title>
    <link rel='stylesheet' href="style.css">
  </head>
  <body>
    <div id="gradient">
    </div>
    <div id="app">
      <grammar-lab
       v-bind:grammar="grammar"
       v-bind:program="program"
       v-on:update-grammar="updateGrammar"
       v-on:update-program="updateProgram"></grammar-lab>
    </div>

    <script type="importmap">
      {
        "imports": {
          "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
          "parser": "../parser.js"
        }
      }
    </script>
    
    <script type="module">
import * as Vue from 'vue'
import Parser from 'parser'
import GrammarLab from './GrammarLab.js'

let parsingSpecification = `NUMBER = CHARACTER_CLASS['0123456789']`
/*`

PROGRAM=MULTIPLE[REF[SECTION]]

NUMBER = MULTIPLE[CHARACTER_CLASS['0123456789']]

SECTION=OR['POINTS','LINES','TRIANGLES']

POINT=OR[
  REF[NUMBER],
  SEQUENCE[REF[NUMBER],STRING_LITERAL[,], REF[NUMBER]],
  SEQUENCE[REF[NUMBER],STRING_LITERAL[,], REF[NUMBER]],STRING_LITERAL[,], REF[NUMBER]
]

LINE=SEQUENCE[POINT, STRING_LITERAL[ ], POINT]

TRIANGLE=SEQUENCE[REF[POINT], STRING_LITERAL[ ], REF[POINT], STRING_LITERAL[ ], REF[POINT]]

POINTS_SECTION=SEQUENCE[STRING_LITERAL[POINTS],OPTIONAL[MULTIPLE[REF[POINT]]]]

LINES_SECTION=SEQUENCE[STRING_LITERAL[LINES],OPTIONAL[MULTIPLE[REF[POINT]]]]

TRIANGLES_SECTION=SEQUENCE[STRING_LITERAL[TRIANGLES],OPTIONAL[MULTIPLE[REF[POINT]]]]

`*/

let parser = new Parser()

parser.setGrammar(parsingSpecification)

//4)Specify a string containing a program written in the language defined by the parsing specification.
let programString = `01010`
/*`POINTS
0,0,0

CAMERA
0,0,100
0,0,0`
*/
let app = Vue.createApp({
  data() {
    return {
      grammar:parsingSpecification,
      program: programString,
    }
  },
  components: {
    GrammarLab
  },
  methods:{
    updateGrammar(g){
      this.grammar = g
    },
    updateProgram(p){
      this.program = p
    }
  }
})

app.provide('parser', parser)
app.mount('#app')
    </script>
    
  </body>
</html>
